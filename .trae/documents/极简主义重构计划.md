# 极简主义重构计划

## 一、重构目标
- 将分散的 Service、Repo、Utils 合并，减少文件跳转
- 为未来的算法和侧边栏功能预留位置
- 引入本地 SQLite 存储历史数据
- 实现前端侧边栏布局
- 大幅减少核心文件数量

## 二、文件删除清单

### 后端文件
- `src/main/db/appStore.js`
- `src/main/ipc/routes.js`
- `src/main/services/countdownService.js`
- `src/main/services/kuaishouService.js`
- `src/main/services/roiService.js`
- `src/main/services/userService.js`
- `src/main/utils/httpClient.js`

### 前端文件
- `src/renderer/src/layouts/BasicLayout.vue`
- `src/renderer/src/stores/dataStore.js`
- `src/renderer/src/views/Dashboard.vue`

## 三、新文件生成清单

### 1. 后端核心服务
- `src/main/service.js` - 整合所有后端逻辑，包括HTTP请求、数据库操作、API接口、定时器等

### 2. 主进程入口
- `src/main/index.js` - 替换现有文件，简化主进程逻辑

### 3. 前端入口与布局
- `src/renderer/src/App.vue` - 替换现有文件，实现侧边栏布局

### 4. 数据监控视图
- `src/renderer/src/views/DataView.vue` - 替换现有Dashboard.vue，整合表格和操作功能

### 5. 全局状态管理
- `src/renderer/src/store/index.js` - 新增Pinia状态管理文件

### 6. Preload 适配
- `src/preload/index.js` - 替换现有文件，适配新的API结构

## 四、重构后架构

1. **后端核心**：所有业务逻辑集中在 `service.js`
2. **主进程**：仅负责窗口创建和IPC通信
3. **前端布局**：集成Element Plus侧边栏，支持多页面切换
4. **状态管理**：使用Pinia管理全局状态
5. **数据存储**：使用SQLite存储历史数据

## 五、执行步骤

1. 删除指定的旧文件
2. 生成新的核心文件（空文件，由用户自行粘贴内容）
3. 确保项目依赖已安装（sqlite3、element-plus等）
4. 运行项目验证重构结果

该重构方案将使项目结构更紧凑，代码逻辑更连贯，同时为未来的算法扩展预留了良好的架构基础。