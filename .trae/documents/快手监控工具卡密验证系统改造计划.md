## 计划

### 1. 代码清理（快手监控1）

#### 1.1 移除卡密相关的服务和工具
- 删除 `src/main/services/cardService.js`
- 删除 `src/main/services/authService.js`
- 删除 `src/main/services/heartbeatService.js`
- 删除 `src/main/services/userService.js`
- 删除 `src/main/utils/cardRepo.js`
- 删除 `src/main/utils/secureStorage.js`
- 删除 `src/main/utils/crypto/rc4.js`
- 删除 `src/main/utils/crypto/signature.js`
- 删除 `src/main/config/security.js`

#### 1.2 移除卡密相关的IPC路由
- 修改 `src/main/ipc/routes.js`，移除与卡密相关的路由

#### 1.3 移除卡密相关的渲染进程代码
- 删除 `src/renderer/src/views/VerifyView.vue`
- 删除 `src/renderer/src/stores/authStore.js`

#### 1.4 修改主应用入口
- 修改 `src/renderer/src/App.vue`，移除卡密验证相关的逻辑
- 修改 `src/main/index.js`，移除卡密相关的服务初始化

### 2. 代码整合（小白卡密验证代码）

#### 2.1 复制并修改小白卡密验证代码
- 将 `XiaoBaiAuth.js` 复制到 `src/main/services/xiaobaiAuth.js`
- 修改 `xiaobaiAuth.js`，确保依赖项正确，模块引用路径正确

#### 2.2 安装依赖项
- 确保 `axios` 和 `node-machine-id` 已安装

#### 2.3 配置IPC路由
- 修改 `src/main/ipc/routes.js`，添加小白卡密验证的IPC路由

#### 2.4 修改预加载脚本
- 修改 `src/preload/index.js`，添加卡密验证相关的API暴露

### 3. 界面设计与开发

#### 3.1 创建新的卡密验证页面
- 创建 `src/renderer/src/views/CardVerifyView.vue`
- 设计简洁直观的界面，包含：
  - 卡密输入框（支持粘贴）
  - 验证按钮
  - 公告展示区域
  - 错误提示与成功反馈

#### 3.2 修改主应用入口
- 修改 `src/renderer/src/App.vue`，添加卡密验证页面的路由和逻辑

### 4. 功能实现

#### 4.1 实现卡密验证逻辑
- 在 `src/main/services/xiaobaiAuth.js` 中实现卡密验证功能
- 确保验证流程安全可靠，包含输入验证和防注入处理

#### 4.2 实现状态管理
- 创建或修改 `src/renderer/src/stores/authStore.js`，管理卡密验证状态

#### 4.3 实现公告功能
- 实现公告获取和展示功能

### 5. 测试

#### 5.1 测试清理后的代码
- 确保移除卡密相关代码后，其他核心功能正常运行

#### 5.2 测试整合后的代码
- 确保小白卡密验证功能正常工作
- 测试界面交互
- 测试错误处理和反馈机制