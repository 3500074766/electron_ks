## 回溯目标
- 保留“重启时重置倒计时，并仅冷启动拉取一次”的修复；撤销之后的布局与前端倒计时改造造成的影响。

## 需要恢复的文件状态
1) 主进程倒计时服务（保留修复）
- `src/main/services/countdownService.js`
  - `start()`：在应用启动时重置下一次触发时间到完整周期；`coldStartDone=false`；启动定时器后执行 `_coldStartFetch()`。
  - `resume()`：仅调用 `_normalize()` 并返回状态；不立即拉取。
  - `_normalize()`：若下一次在过去，按周期对齐到未来，不触发拉取。
  - `_coldStartFetch()`：仅首次拉取一次 users/kuaishou/roi 并推送；不重置倒计时。

2) 主进程入口（保留数据库与窗口设置）
- `src/main/index.js`
  - 生产环境使用 `PORTABLE_EXECUTABLE_DIR` 检查同目录 `Sqlite3.db`；缺失则提示 5 秒后退出。
  - `BrowserWindow` 最小尺寸设定（若已调整）：`minWidth: 1360, minHeight: 880`（可按现状保留）。

3) IPC 路由（保留接入倒计时）
- `src/main/ipc/routes.js`
  - 注册 `CountdownService` 并在 `did-finish-load` 后 `cdSvc.start()`。
  - 暴露 `get_countdown_state` 与 `resume_countdown`；`update_interval` 调用 `cdSvc.setIntervalMinutes()`。

4) 预加载桥（保留接口）
- `src/preload/index.js`
  - 暴露 `getCountdownState()`、`resumeCountdown()`。

5) 渲染层（保持当时的订阅方式）
- `src/renderer/src/composables/useRefresh.js`
  - 移除本地 `setInterval` 的自动刷新；依赖主进程 `countdown_tick` 推送更新倒计时。
  - 页面 `visibilitychange` 时调用 `resumeCountdown()` 校准倒计时，但不主动请求数据。
- `src/renderer/src/composables/useWebSocket.js`
  - 取消连接建立时的首帧手动请求（避免与主进程重复）。
- `MainView.vue` 保持旧版结构（HeaderActions + DataTable），不引入新的布局组件。

6) 布局相关（回滚到修复当时样式）
- 恢复原有 `App.vue`、`style.css` 的基本布局（不使用后续 ShellLayout/SidebarNav 改造）。

## 实施步骤
1. 停止 dev 进程；备份当前工作分支。
2. 逐文件比对并还原上述文件到目标快照的实现（以我们之前的修复版本为准）。
3. 清理前端布局改造的新增文件（如 `ShellLayout.vue`、`SidebarNav.vue`、路由改动等）。
4. 安装依赖并启动验证：`npm run dev`。
5. 验证功能：
   - 首次启动：冷启动拉取一次；倒计时从完整周期开始。
   - 最小化/恢复：调用 `resumeCountdown` 校准，倒计时持续；不重复拉取。
   - ROI 请求：仅由主进程倒计时触发一次，前端不轮询。

## 交付
- 提供差异清单与关键文件的还原版本；确保可编译运行并通过上述场景测试。